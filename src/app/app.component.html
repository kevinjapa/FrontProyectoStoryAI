<!-- <body>
    <div class="principal">
        <h1>StoryAI</h1>
        <div class="secundario">
            <button class="Personaje"> Personaje </button>
            <div class="chat">
               <div class="consulta">
                <h3>Consulta</h3>
                <div id="transcript">
                    {{ isLoading ? 'Cargando...' : transcript }}
                  </div>
                  
               </div>
               <div class="respuesta">
                <h3>Respuesta</h3>
               </div> 
            </div>
            <button id="record" 
                [ngClass]="{ 'recording': isRecording }" 
                [disabled]="isRecording"
                (click)="handleRecording()">
                {{ isRecording ? 'Grabando...' : 'Hablar' }}
            </button>
        </div>    
    </div>
    <router-outlet></router-outlet>
</body> -->


<body>
    <div class="principal">
      <h1>StoryAI</h1>
      <div class="secundario">
        
        <div class="button-Personaje">
            <button class="Personaje" (click)="toggleDropdown()">{{ selectedColor ? selectedColor : 'Personajes' }}</button>
            <div [class.show]="dropdownOpen" class="Personaje-content">
                <label *ngFor="let color of colors">
                    <input type="radio" name="color" [value]="color" (click)="selectColor(color)"> {{ color }}
                </label>
            </div>
        </div>
        <div class="chat">
          <div *ngFor="let entry of chatHistory" class="chat-entry">
            <div class="consulta">
              <h3>Consulta</h3>
              <div class="question">{{ entry.question }}</div>
            </div>
            <div class="respuesta">
              <h3>Respuesta</h3>
              <!-- <div class="answer">{{ entry.answer }}</div> -->
              <div class="answer" *ngIf="responseMessage">
                <p>Respuesta de la API:</p>
                <pre>{{ responseMessage | json }}</pre>
              </div>
            </div>
          </div>
          <div class="current" *ngIf="isLoading">
            <div class="consulta">
              <h3>Consulta</h3>
              <div id="transcript">
                Cargando...
              </div>
            </div>
            <div class="respuesta">
              <h3>Respuesta</h3>
              <div class="answer"></div>
            </div>
          </div>
        </div>
        <button id="record" 
                [ngClass]="{ 'recording': isRecording }" 
                [disabled]="isRecording"
                (click)="handleRecording()">
          {{ isRecording ? 'Grabando...' : 'Hablar' }}
        </button>
      </div>    
    </div>
  </body>

  <div>
    <textarea name="messageToSend" [(ngModel)]="messageToSend" rows="4" placeholder="Escribe tu mensaje aquí..."></textarea>
    <br>
    <button (click)="sendMessage()">Enviar Mensaje</button>
  </div>
  

  <!-- Aquí puedes mostrar la respuesta o mensajes de error -->
<div *ngIf="responseMessage">
  <!-- <p>Respuesta de la API:</p> -->
  <pre>{{ responseMessage | json }}</pre>
</div>
<!-- <div *ngIf="errorMessage">
  <p>Error:</p>
  <p>{{ errorMessage }}</p>
</div>

<div *ngIf="isLoading">
  <p>Cargando...</p>
</div>
   -->